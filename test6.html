<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Three.js Frame Customizer</title>
  <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
  <link href="assets/plugins/cropperjs/cropper.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="loaded">
  <!-- Loader element with a progress bar -->
  <div id="loader">
    <div id="progress-bar" style="all:unset">
      <!-- <div id="progress-bar-fill"></div> -->
      <div class="extraModel" style="background: rgba(0, 0, 0, 0.5); display: flex;">
        <div style=" display: flex; flex-direction: column; align-items: center;">
          <div class="modelWaitingloader"><img src="./assets/images/newLoader.gif" alt=""
              style="width: 26%; padding-bottom: 10px;">
            <!-- <p id="loadingText"></p> -->
            <div id="progress-text" style="margin-top: 15%;">Loading... 0%</div>
          </div>
        </div>
      </div>
    </div>
    <!-- <div id="progress-text" style="margin-top: 15%;">Loading... 0%</div> -->
  </div>
  <div class="loader-wrapper">
    <div class="loader"></div>
  </div>
  <div class="controls-wrapper">

    <div class="left-controls">
      <button class="toggle-controls-button btn btn-primary btn-sm hidden" data-target=".left-controls-content">
        <i class="fas fa-times"></i>
      </button>
      <div class="controls left-controls-content">
        <div class="controls-inner">
          <div class="accordion" id="accordionModel">
            <div class="accordion-item" data-model="main_model">
              <h2 class="accordion-header" id="headingMainModel">
                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseMainModel" aria-expanded="true" aria-controls="collapseMainModel">
                  Main Model
                </button>
              </h2>
              <div id="collapseMainModel" class="accordion-collapse collapse show" aria-labelledby="headingMainModel"
                data-bs-parent="#accordionModel">
                <div class="accordion-body">
                  <div class="control-group">
                    <label for="frameSize">Unit Size</label>
                    <select class="frameSize">
                      <option value="Model_661">661mm Wide</option>
                      <option value="Model_1061">1061mm Wide</option>
                      <option value="Model_1200">1200mm Wide</option>
                      <option value="Model_1500">1500mm Wide</option>
                      <option value="Model_2000">2000mm Wide</option>
                      <option value="Model_3000">3000mm Wide</option>
                    </select>
                  </div>
                  <div class="control-group">
                    <label for="topDropdown">Top Options</label>
                    <select class="topDropdown">
                      <option value="Header">Header</option>
                      <option value="Shelf">Shelf</option>
                      <option value="None">None</option>
                    </select>
                  </div>
                  <div class="control-group topShelfOptions">
                    <label for="shelfTypeDropdown">Shelf Type</label>
                    <select class="shelfTypeDropdown">
                      <option value="Header_Wooden_Shelf">Wooden Shelf 18mm</option>
                      <option value="Header_Glass_Shelf">Glass Shelf 8mm</option>
                    </select>
                  </div>
                  <div class="control-group topShelfOptions shelfTypeBox">
                    <label for="shelfTexture">Shelf Style</label>
                    <div class="custom-dropdown" data-type="shelf">
                      <button class="dropdown-button">
                        <img data-src="" alt="Selected Texture" class="selected-image" />
                        <span>Select Shelf Style</span>
                      </button>
                      <div class="dropdown-content">
                        <!-- Colour options -->
                        <div class="dropdown-item" data-type="color" data-value="0xffffff">
                          <div class="color-box" style="background-color: white;"></div>
                          <span>White Melamine 18mm</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x000000">
                          <div class="color-box" style="background-color: black;"></div>
                          <span>Black Melamine 18mm</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="control-group topHeaderOptions">
                    <label for="headerOptions">Header Option</label>
                    <select class="headerOptions">
                      <option value="SEG">SEG</option>
                      <option value="ALG">Acrylic with logo</option>
                      <option value="ALG3D">Acrylic with Logo in 3D</option>
                    </select>
                  </div>
                  <div class="control-group topHeaderOptions">
                    <label for="headerSizeDropdown">Header Height</label>
                    <select class="headerSizeDropdown">
                      <option value="Header_300">300mm</option>
                      <option value="Header_500">500mm</option>
                    </select>
                  </div>
                  <div class="control-group topHeaderOptions">
                    <label class="header-toggle-label">
                      <input type="checkbox" class="headerRodToggle header-toggle-input" /> Rods
                    </label>
                  </div>
                  <div class="control-group topHeaderOptions headerRodColorDropdownBox">
                    <label for="headerRodColorDropdown">Rod Colour</label>
                    <select class="headerRodColorDropdown">
                      <option value="0x000000">Black RAL 9005</option>
                      <option value="0xffffff">White RAL 9016</option>
                    </select>
                  </div>
                  <div class="control-group topHeaderOptions">
                    <label for="topFrameFileUpload">Header Graphic</label>
                    <div class="file-upload-wrapper">
                      <label class="file-upload-label">
                        <input type="file" accept="image/*" class="topFrameFileUpload file-upload-input">
                        Upload Header Graphic
                      </label>
                    </div>
                  </div>
                  <div class="control-group topHeaderOptions headerFrameColorInputBox">
                    <label for="headerFrameColorInput">Header Graphic BG Colour</label>
                    <input type="color" class="headerFrameColorInput">
                  </div>
                  <div class="control-group topHeaderOptions headerFrameColorDropdownBox">
                    <label for="headerFrameColorDropdown">Header Acrylic Colour</label>
                    <select class="headerFrameColorDropdown">
                      <option value="0x000000">Black</option>
                      <option value="0xffffff">White</option>
                    </select>
                  </div>
                  <div class="control-group">
                    <label class="header-toggle-label">
                      <input type="checkbox" class="slottedSidesToggle header-toggle-input" /> Slotted Sides
                    </label>
                  </div>
                  <div class="control-group">
                    <label for="frameTexture">Frame Style</label>
                    <div class="custom-dropdown" data-type="frame">
                      <button class="dropdown-button">
                        <img src="" alt="Selected Texture" class="selected-image" />
                        <span>Select Frame Style</span>
                      </button>
                      <div class="dropdown-content">
                        <!-- Colour options -->
                        <div class="dropdown-item" data-type="color" data-value="0xffffff">
                          <div class="color-box" style="background-color: white;"></div>
                          <span>White RAL 9016 </span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x000000">
                          <div class="color-box" style="background-color: black;"></div>
                          <span>Black RAL 9005</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x4E5358">
                          <div class="color-box" style="background-color: #4E5358;"></div>
                          <span>Slate Grey RAL 7015</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x383E42">
                          <div class="color-box" style="background-color: #383E42;"></div>
                          <span>Anthracite Grey RAL 7016</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x2B3A44">
                          <div class="color-box" style="background-color: #2B3A44;"></div>
                          <span>Grey Blue RAL 5008</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x00387B">
                          <div class="color-box" style="background-color: #00387B;"></div>
                          <span>Ultramarine Blue RAL 5002</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x1F3855">
                          <div class="color-box" style="background-color: #1F3855;"></div>
                          <span>Sapphire Blue RAL 5003</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0xCC2C24">
                          <div class="color-box" style="background-color: #CC2C24;"></div>
                          <span>Pure Red RAL 3028</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0xA72920">
                          <div class="color-box" style="background-color: #A72920;"></div>
                          <span>Flame Red RAL 3000</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0xE26E0E">
                          <div class="color-box" style="background-color: #E26E0E;"></div>
                          <span>Deep Orange RAL 2011</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0xE25303">
                          <div class="color-box" style="background-color: #E25303;"></div>
                          <span>Pure Orange RAL 2004</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x3C7460">
                          <div class="color-box" style="background-color: #3C7460;"></div>
                          <span>Patina Green RAL 6000</span>
                        </div>
                        <div class="dropdown-item" data-type="color" data-value="0x315442">
                          <div class="color-box" style="background-color: #315442;"></div>
                          <span>Pine Green RAL 6028</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Gold-Oak.jpg">
                          <img data-src="./assets/images/borders/Gold-Oak.jpg" alt="Gold-Oak" />
                          <span>Gold-Oak</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Mat-Red.jpg">
                          <img data-src="./assets/images/borders/Mat-Red.jpg" alt="Mat-Red" />
                          <span>Mat-Red</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Oak-1.jpg">
                          <img data-src="./assets/images/borders/Oak-1.jpg" alt="Oak-1" />
                          <span>Oak-1</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Oak-2.jpg">
                          <img data-src="./assets/images/borders/Oak-2.jpg" alt="Oak-2" />
                          <span>Oak-2</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Red-Walnut.jpg">
                          <img data-src="./assets/images/borders/Red-Walnut.jpg" alt="Red-Walnut" />
                          <span>Red-Walnut</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Sandal-Wood.jpg">
                          <img data-src="./assets/images/borders/Sandal-Wood.jpg" alt="Sandal-Wood" />
                          <span>Sandal-Wood</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Shabili.jpg">
                          <img data-src="./assets/images/borders/Shabili.jpg" alt="Shabili" />
                          <span>Shabili</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Walnut.jpg">
                          <img data-src="./assets/images/borders/Walnut.jpg" alt="Walnut" />
                          <span>Walnut</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Yellow-Cherry.jpg">
                          <img data-src="./assets/images/borders/Yellow-Cherry.jpg" alt="Yellow-Cherry" />
                          <span>Yellow-Cherry</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Yellow-Pear.jpg">
                          <img data-src="./assets/images/borders/Yellow-Pear.jpg" alt="Yellow-Pear" />
                          <span>Yellow-Pear</span>
                        </div>
                        <div class="dropdown-item" data-type="texture" data-value="Black-Wallnut.jpg">
                          <img data-src="./assets/images/borders/Black-Wallnut.jpg" alt="Black-Wallnut" />
                          <span>Black-Wallnut</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="control-group">
                    <label for="mainFrameFileUpload">Frame Graphic</label>
                    <div class="file-upload-wrapper">
                      <label class="file-upload-label">
                        <input type="file" accept="image/*" class="mainFrameFileUpload file-upload-input">
                        Upload Frame Graphic
                      </label>
                    </div>
                  </div>
                  <div class="control-group">
                    <label for="mainFrameColorInput">Frame Graphic BG Colour</label>
                    <input type="color" class="mainFrameColorInput">
                  </div>
                  <div class="control-group">
                    <label for="baseSelectorDropdown">Base Style</label>
                    <select class="baseSelectorDropdown" class="">
                      <option value="none">Select Base Style</option>
                      <!-- <option value="Base_Flat">Flat</option> -->
                      <option value="Base_Support_Sides">Flat</option>
                      <option value="Base_Solid">Solid</option>
                    </select>
                  </div>
                  <div class="control-group">
                    <label for="baseColor">Base Colour</label>
                    <select class="baseColor">
                      <option value="0x000000">Black RAL 9005</option>
                      <option value="0xffffff">White RAL 9016</option>
                      <!-- <option value="0x4E5358">Slate Grey RAL 7015</option>
                      <option value="0x383E42">Anthracite Grey RAL 7016</option>
                      <option value="0x2B3A44">Grey Blue RAL 5008</option>
                      <option value="0x00387B">Ultramarine Blue RAL 5002</option>
                      <option value="0x1F3855">Sapphire Blue RAL 5003</option>
                      <option value="0xCC2C24">Pure Red RAL 3028</option>
                      <option value="0xA72920">Flame Red RAL 3000</option>
                      <option value="0xE26E0E">Deep Orange RAL 2011</option>
                      <option value="0xE25303">Pure Orange RAL 2004</option>
                      <option value="0x3C7460">Patina Green RAL 6000</option>
                      <option value="0x315442">Pine Green RAL 6028</option> -->
                    </select>
                  </div>
                  <div class="control-group">
                    <label for="addHanger">Fixtures</label>
                    <div class="horizontal-buttons d-flex gap-2 add-hangers">
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Rail_Step">
                        Step Arm
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Rail_Step_loader"> -->
                      </button>
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Rail_Single">
                        Pond Arm
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Rail_Single_loader"> -->
                      </button>
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Rail_D_500mm">
                        Rail-D 500mm
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Rail_D_500mm_loader"> -->
                      </button>
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Rail_D_1000mm">
                        Rail-D 1000mm
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Rail_D_1000mm_loader"> -->
                      </button>
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Golf_Club_Iron">
                        Golf Arm Iron
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Golf_Club_Iron_loader"> -->
                      </button>
                      <button class="btn btn-primary btn-sm addHanger" data-hanger="Hanger_Golf_Club_Driver">
                        Golf Arm Driver
                        <!-- <div class="loaderBack"></div>
                        <img src="./assets/images/loader.gif" class="Hanger_Golf_Club_Driver_loader"> -->
                      </button>
                    </div>
                  </div>
                  <div class="control-group">
                    <label class="header-toggle-label">
                      <input type="checkbox" class="hangerClothesToggle header-toggle-input" /> Clothes
                    </label>
                  </div>
                  <div class="control-group">
                    <label class="header-toggle-label">
                      <input type="checkbox" class="hangerGolfClubsToggle header-toggle-input" /> Golf Clubs
                    </label>
                  </div>
                  <div class="control-group">
                    <label for="hangerStandColor">Fixtures Colour</label>
                    <select class="hangerStandColor">
                      <option value="0x000000">Black</option>
                      <option value="0xffffff">White</option>
                    </select>
                  </div>
                  <div class="control-group">
                    <!-- <label for="addRack">Shelf</label> -->
                    <div class="horizontal-buttons d-flex gap-2">
                      <button class="btn btn-primary btn-sm addRack" data-rack="RackWoodenShelf">Wooden Shelf</button>
                      <button class="btn btn-primary btn-sm addRack" data-rack="RackGlassShelf">Glass Shelf</button>
                    </div>
                  </div>
                  <div class="control-group">
                    <label for="rackStandColor">Shelf Bracket Colour</label>
                    <select class="rackStandColor">
                      <option value="0x000000">Black</option>
                      <option value="0xffffff">White</option>
                    </select>
                  </div>
                  <div class="control-group">
                    <label for="rackShelfColor">Shelf Colour</label>
                    <select class="rackShelfColor">
                      <option value="0x000000">Black</option>
                      <option value="0xffffff">White</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="control-group">
            <label for="measurementToggle" class="header-toggle-label">
              <input type="checkbox" id="measurementToggle" class="header-toggle-input" /> Show Measurement
            </label>
          </div>
          <div class="control-group">
            <button class="btn btn-primary btn-sm addAnotherModel" data-type="Add_Another_Model">Add Another Model</button>
          </div>
          <div class="control-group moveLeftRightModel" style="display: none;">
            <button id="moveLeftModel" class="btn btn-outline-primary"><i class="fas fa-arrow-left"></i></button>
            <button id="moveRightModel" class="btn btn-outline-primary"><i class="fas fa-arrow-right"></i></button>
          </div>
          <!-- <div class="control-group mt-3">
            <button id="captureButton" class="btn btn-outline-primary btn-sm">Capture Image</button>
          </div> -->
          <!-- <div class="control-group mt-3">
            <button id="takeScreenShot" class="btn btn-outline-primary btn-sm">take screenShot</button>
          </div> -->
          <div class="control-group mt-3 loginFormDiv"> 
            <div id="loginForm" class="form-container">
              <div id="loginRegisterClose">X</div>
              <form id="Login">
                <h2>Login</h2>
                <p id="responseErr" style="color: red; display: none;"></p>
                <input type="email" name="email" id="loginEmail" placeholder="Email" required autocomplete="email">
                <span id="loginEmailError" class="error-message" style="color: red;"></span>
              
                <input type="password" name="password" id="loginPassword" placeholder="Password" required
                  autocomplete="current-password">
                <span id="loginPasswordError" class="error-message" style="color: red;"></span>
              
                <input type="hidden" name="action" value="LoginUser">
              
                <input type="button" value="Login" id="loginButton">
              </form>

              <div class="switch-form">
                <span>Don't have an account? <button class="openRegisterForm">Register</button></span>
              </div>
            </div>
          </div>

          <div class="control-group mt-3 registerFormDiv"> 
            <div id="registerForm" class="form-container">
              <form id="Register">
                <h2>Register</h2>
              
                <!-- Username Field -->
                <input type="text" id="registerUsername" name="userName" placeholder="Username" required autocomplete="username">
                <span id="registerUsernameError" class="error-message" style="color: red;"></span>
              
                <!-- Email Field -->
                <input type="email" id="registerEmail" name="email" placeholder="Email" required autocomplete="email">
                <span id="registerEmailError" class="error-message" style="color: red;"></span>
              
                <!-- Password Field -->
                <input type="password" id="registerPassword" name="password" placeholder="Password" required
                  autocomplete="new-password">
                <span id="registerPasswordError" class="error-message" style="color: red;"></span>
              
                <!-- Hidden Field -->
                <input type="hidden" name="action" value="RegisterUser">
              
                <!-- Register Button -->
                <input type="button" value="Register" id="registerButton">
              </form>

              <div class="switch-form">
                <span>Already have an account? <button class="openLoginForm">Login</button></span>
              </div>
            </div>
          </div>

          <div class="control-group mt-3" id="myModelsDiv" style="display: none;">
            <a href="my-model.php" class="btn btn-link btn-sm">My Models</a>
          </div>
          <div class="control-group mt-3">
            <button id="saveModelDataButton" class="btn btn-outline-primary btn-sm">Save My Model</button>
          </div>
          <div class="control-group mt-3">
            <button id="savePdfButton" class="btn btn-outline-primary btn-sm">Download Pdf</button>
          </div>
          <div class="control-group mt-3">
            <button id="formSubmition" class="btn btn-outline-primary btn-sm">Submit</button>
          </div>
          <div class="control-group mt-3">
            <button id="createQrButton" class="btn btn-outline-primary btn-sm">Show In My Phone</button>
          </div>
          <div class="control-group mt-3 ArInPhone" style="display:none">
            <button id="showInAR" class="border-0 rounded-pill bg-white">
              <img src=".\assets\images\modelLogo.png" alt="View in AR" style="width: 30px;">
            </button>
          </div>
          <div class="control-group mt-3 LogoutUser" style="display:none">
            <button id="logout" class="btn btn-outline-primary btn-sm">Log Out</button>
          </div>
          <div id="ArView" class="ar-view" style="display:none; width: 100%; height: 100vh; z-index: 99; position: fixed; top: 0; left: 0; background-color: #ced9eb;">
            <button id="closeButtonAR">X</button>
            <model-viewer id="modelViewer" ar auto-rotate camera-controls ar-placement="floor" style="width: 100%; height: 90%;"></model-viewer>
          </div>
          <a id="ViewArForIos" rel="ar" style="display: none;">
            <img href="eg.jpg>" alt="here" />
          </a>
          <div id="loadingModal" class="extraModel" style="background: rgba(0, 0, 0, 0.5)">
            <div style=" display: flex; flex-direction: column; align-items: center;">
              <div class="modelWaitingloader"><img src="./assets/images/newLoader.gif" alt="" style="width: 14%; padding-bottom: 10px;">
                <p id="loadingText"></p>
              </div>
            </div>
          </div>
          <div id="formModel" class="extraModel" style="background: rgba(0, 0, 0, 0.5)">
            <div class="modal" id="confirmationModal" tabindex="-1" role="dialog">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Confirm Action</h5>
                    <button type="button" id="confirModelCloseButtton" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>Would you like to save your design as a PDF and view it in AR?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" id="yesButton" class="btn btn-primary">Yes</button>
                    <button type="button" id="noButton" class="btn btn-secondary" data-dismiss="modal">No</button>
                  </div>
                </div>
              </div>
            </div>
            <div id="formBase">
              <button id="formCloseBtn">X</button>
              <form action="api.php" method="post" id="FormSubmitionForMonday">
                <label class="form-label" for="">Name</label>
                <input type="text" name="name" id="name" class="form-control" placeholder="Enter your Name" required>
                <div class="invalid-feedback">Please provide your name.</div>

                <label class="form-label mt-3" for="">Company Name</label>
                <input type="text" name="companyName" id="companyName" class="form-control" placeholder="Enter your company name" required>
                <div class="invalid-feedback">Please provide your company name.</div>

                <label class="form-label mt-3" for="">Email</label>
                <input type="email" name="email" id="email" class="form-control" placeholder="Enter your email" required>
                <div class="invalid-feedback">Please provide your email.</div>

                <label class="form-label mt-3" for="">Qty required</label>
                <input type="number" name="qty" id="qty" class="form-control" min="1" value="1" placeholder="Enter number of Quantity" required>
                <div class="invalid-feedback">Please provide number of quantity.</div>

                <label class="form-label mt-3" for="">Date required</label>
                <input type="date" name="date" id="date" class="form-control" placeholder="Enter your Date" required>
                <div class="invalid-feedback">Please provide delivery date.</div>
                <input type="hidden" name="action" value="formSubmitionForMonday">

                <button class="mt-3 btn btn-primary submitForm" type="button">Submit</button>
              </form>
            </div>
          </div>
          <div id="showQRHere" class="extraModel">
            <input type="button" id="closeBtn" value="X">
            <img id="qrImage">
          </div>

        </div>
      </div>
    </div>
    <div class="right-controls hidden">
      <button class="toggle-controls-button btn btn-primary btn-sm" data-target=".right-controls-content">
        <i class="fas fa-times"></i>
      </button>
      <div class="controls right-controls-content">
        <div class="controls-inner model_items">

        </div>
      </div>
    </div>

  </div>
  <div id="cropper-container">
    <div class="cropper-popup">
      <div class="cropper-inner">
        <img id="cropper-image" src="" alt="Image to crop">
      </div>
    </div>
    <!-- Control Buttons -->
    <div class="d-flex justify-content-between mt-2">
      <button id="cropper-zoom-in" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-search-plus"></i> Scale Up
      </button>
      <button id="cropper-zoom-out" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-search-minus"></i> Scale Down
      </button>
      <button id="cropper-reset" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-sync-alt"></i> Restart
      </button>
    </div>


    <div class="d-flex justify-content-between mt-2">
      <button id="close-button" class="btn btn-outline-danger btn-sm">Close</button>
      <button id="crop-button" class="btn btn-outline-primary btn-sm">Done</button>
    </div>
  </div>

  <div id="container"></div>

  <script type="importmap">
    {
      "imports": {
        "three": "./three/build/three.module.js",
        "three/addons/": "./three/examples/jsm/"
      }
    }
  </script>

  <script type="module" src="./main6.js" async></script>
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  <script src="assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
  <script src="assets/plugins/cropperjs/cropper.min.js" defer></script>
  <script>
    window.onload = function () {
      fetch('api.php')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            console.log('Deleted files:', data.deletedFiles);
          } else {
          }
        })
        .catch(error => console.error('Fetch error:', error));
    };
  </script>
  <script>    
    const userAgent = navigator.userAgent;
    if (/iPhone|iPad|iPod/.test(userAgent) || /Android/.test(userAgent)) {
      document.querySelector(".ArInPhone").style.display = "block";
    }
    function checkSession() {
      const userId = localStorage.getItem('user_id');
      const username = localStorage.getItem('username');
      if (userId && username) {
        document.getElementById("myModelsDiv").style.display = "block";
        document.querySelector(".LogoutUser").style.display = "block";
        console.log("User is logged in:", { username });
        const formData = new FormData();
        formData.append("username", username);
        formData.append("userId", userId);
        formData.append("action", "setSessionData");
        window.onload = function () {
          fetch('api.php',{
            method: "POST",
            body: formData,
          })
        };
      }
    }
    checkSession();

    function destroySession() {
      // Remove session data from localStorage
      localStorage.removeItem('user_id');
      localStorage.removeItem('username');
    }
    document.getElementById("logout").addEventListener("click", function(){
      destroySession();
      window.location.reload();
    })
    
    // Lazy load images using IntersectionObserver
    document.addEventListener("DOMContentLoaded", function () {
      const images = document.querySelectorAll('img[data-src]');
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.getAttribute('data-src'); // Set the actual image source
            img.removeAttribute('data-src'); // Remove the data-src attribute
            observer.unobserve(img); // Stop observing this image
          }
        });
      });

      images.forEach(img => {
        observer.observe(img); // Start observing each image
      });

      // Select all toggle buttons
      const toggleControlsButtons = document.querySelectorAll('.toggle-controls-button');

      // Add click event listener to each button
      toggleControlsButtons.forEach(button => {
        button.addEventListener('click', function () {
          // Get the target class from the data attribute
          const targetClass = button.getAttribute('data-target');
          const controlsDiv = document.querySelector(targetClass);

          if (controlsDiv) {
            controlsDiv.classList.toggle('hidden');

            // Change the icon based on visibility
            const icon = button.querySelector('i');
            if (controlsDiv.classList.contains('hidden')) {
              icon.classList.remove('fa-times'); // Change to open icon
              icon.classList.add('fa-bars');
            } else {
              icon.classList.remove('fa-bars'); // Change to close icon
              icon.classList.add('fa-times');
            }
          }
        });
      });

    });

  </script>
</body>

</html>
